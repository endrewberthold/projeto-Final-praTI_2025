{"openapi":"3.1.0","info":{"title":"Plataform API","description":"API do projeto — endpoints de auth, sessions, flashcards, questions, attempts","contact":{"name":"Equipe","email":"dev@plataform.org"},"license":{"name":"Apache 2.0"},"version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"paths":{"/api/flashcards/{id}":{"put":{"tags":["flashcard-controller"],"operationId":"updateFlashcard","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlashcardRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FlashcardResponseDTO"}}}}}},"delete":{"tags":["flashcard-controller"],"operationId":"deleteFlashcard","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/sessions/{sessionId}/finish":{"post":{"tags":["session-controller"],"summary":"Finaliza sessão","operationId":"finishSession","parameters":[{"name":"sessionId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Sessão finalizada com sucesso","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionFinishResponseDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/sessions/{sessionId}/attempts":{"post":{"tags":["attempt-controller"],"operationId":"submitAttempt","parameters":[{"name":"sessionId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttemptRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AttemptResponseDTO"}}}}}}},"/api/sessions/start":{"post":{"tags":["session-controller"],"summary":"Inicia sessão","description":"Cria sessão com questões randomizadas por área/nível","operationId":"startSession","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionStartRequest"}}},"required":true},"responses":{"201":{"description":"Sessão criada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionStartResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/flashcards":{"get":{"tags":["flashcard-controller"],"operationId":"getUserFlashcards","parameters":[{"name":"areaId","in":"query","required":false,"schema":{"type":"string"}},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageFlashcardResponseDTO"}}}}}},"post":{"tags":["flashcard-controller"],"operationId":"createFlashcard","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlashcardRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FlashcardResponseDTO"}}}}}}},"/api/auth/reset-password":{"post":{"tags":["auth-controller"],"operationId":"resetPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResetPasswordResponse"}}}}}}},"/api/auth/register":{"post":{"tags":["auth-controller"],"operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/auth/register/admin":{"post":{"tags":["auth-controller"],"operationId":"registerAdmin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/auth/refresh":{"post":{"tags":["auth-controller"],"operationId":"refreshToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RefreshTokenResponse"}}}}}}},"/api/auth/logout":{"post":{"tags":["auth-controller"],"operationId":"logout","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/login":{"post":{"tags":["auth-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/auth/forgot-password":{"post":{"tags":["auth-controller"],"operationId":"forgotPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ForgotPasswordResponse"}}}}}}},"/api/user/profile":{"get":{"tags":["user-controller"],"operationId":"getProfile","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/user/profile/full":{"get":{"tags":["user-controller"],"operationId":"getFullProfile","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}}}}},"/api/user/all":{"get":{"tags":["user-controller"],"operationId":"getAllUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"}}}}}}}},"/api/auth/validate-reset-token/{token}":{"get":{"tags":["auth-controller"],"operationId":"validateResetToken","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ValidateTokenResponse"}}}}}}}},"components":{"schemas":{"FlashcardRequestDTO":{"type":"object","properties":{"term":{"type":"string","minLength":1},"areaId":{"type":"string"},"description":{"type":"string","maxLength":400,"minLength":0}},"required":["areaId","description","term"]},"FlashcardResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"term":{"type":"string"},"description":{"type":"string"},"areaId":{"type":"string"},"areaName":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"CompetencySummaryDTO":{"type":"object","properties":{"competencyId":{"type":"integer","format":"int64"},"competencyName":{"type":"string"},"totalQuestions":{"type":"integer","format":"int32"},"correct":{"type":"integer","format":"int32"},"wrong":{"type":"integer","format":"int32"},"accuracyPct":{"type":"number","format":"double"}}},"PerQuestionResultDTO":{"type":"object","properties":{"questionId":{"type":"integer","format":"int64"},"answerTimeMs":{"type":"integer","format":"int32"},"xpEarned":{"type":"integer","format":"int32"},"correct":{"type":"boolean"}}},"SessionFinishResponseDTO":{"type":"object","description":"Resposta de final de sessão","properties":{"sessionId":{"type":"integer","format":"int64","description":"Id da sessão","example":"int"},"totalQuestions":{"type":"integer","format":"int32","description":"Total de Questões respondidas","example":"int"},"correct":{"type":"integer","format":"int32","description":"Alternativa correta","example":true},"wrong":{"type":"integer","format":"int32","description":"Alternativa incorreta","example":false},"xpEarned":{"type":"integer","format":"int32","description":"Experiência adquirida","example":"int"},"avgTimeMs":{"type":"number","format":"double","description":"Tempo médio da sesão","example":"MS"},"levelCompleted":{"type":"boolean","description":"Level completo","example":false},"perCompetency":{"type":"array","description":"Competencias presentes na sessão","example":"List","items":{"$ref":"#/components/schemas/CompetencySummaryDTO"}},"perSkill":{"type":"array","description":"Habilidades presentes na sessão","example":"List","items":{"$ref":"#/components/schemas/SkillSummaryDTO"}},"perQuestion":{"type":"array","description":"Resposta das questões","example":"List","items":{"$ref":"#/components/schemas/PerQuestionResultDTO"}},"abandoned":{"type":"boolean","description":"Resposta caso a sessão seja abandonada","example":false}}},"SkillSummaryDTO":{"type":"object","properties":{"skillId":{"type":"integer","format":"int64"},"skillCode":{"type":"string"},"skillDescription":{"type":"string"},"totalQuestions":{"type":"integer","format":"int32"},"correct":{"type":"integer","format":"int32"},"wrong":{"type":"integer","format":"int32"},"accuracyPct":{"type":"number","format":"double"}}},"AttemptRequestDTO":{"type":"object","properties":{"questionId":{"type":"integer","format":"int64"},"presentedId":{"type":"string"},"answerTimeMs":{"type":"integer","format":"int32"}}},"AttemptResponseDTO":{"type":"object","properties":{"attemptId":{"type":"integer","format":"int64"},"questionId":{"type":"integer","format":"int64"},"correct":{"type":"boolean"},"xpEarned":{"type":"integer","format":"int32"},"answerTimeMs":{"type":"integer","format":"int32"}}},"SessionStartRequest":{"type":"object","properties":{"levelId":{"type":"integer","format":"int64"},"numQuestions":{"type":"integer","format":"int32"},"areaId":{"type":"string"}}},"PresentedAlternativeDTO":{"type":"object","properties":{"presentedId":{"type":"string"},"id":{"type":"integer","format":"int64"},"letter":{"type":"string"},"text":{"type":"string"}}},"SessionQuestionDTO":{"type":"object","properties":{"questionId":{"type":"integer","format":"int64"},"text":{"type":"string"},"imageUrl":{"type":"string"},"difficulty":{"type":"number","format":"double"},"alternatives":{"type":"array","items":{"$ref":"#/components/schemas/PresentedAlternativeDTO"}}}},"SessionStartResponse":{"type":"object","properties":{"sessionId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"areaId":{"type":"string"},"levelId":{"type":"integer","format":"int64"},"startedAt":{"type":"string","format":"date-time"},"questions":{"type":"array","items":{"$ref":"#/components/schemas/SessionQuestionDTO"}}}},"ResetPasswordRequest":{"type":"object","properties":{"token":{"type":"string","minLength":1},"newPassword":{"type":"string","maxLength":2147483647,"minLength":6},"confirmPassword":{"type":"string","minLength":1}},"required":["confirmPassword","newPassword","token"]},"ResetPasswordResponse":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"}}},"UserRequest":{"type":"object","properties":{"name":{"type":"string","minLength":1},"email":{"type":"string","format":"email","minLength":1},"password":{"type":"string","maxLength":2147483647,"minLength":6}},"required":["email","name","password"]},"UserResponse":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"},"createAt":{"type":"string","format":"date-time"},"xpPoints":{"type":"integer","format":"int32"},"level":{"type":"integer","format":"int32"},"provider":{"type":"string"},"isOauthUser":{"type":"boolean"}}},"RefreshTokenRequest":{"type":"object","properties":{"refreshToken":{"type":"string","minLength":1}},"required":["refreshToken"]},"RefreshTokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"tokenType":{"type":"string"},"expiresIn":{"type":"integer","format":"int64"}}},"LoginRequest":{"type":"object","properties":{"email":{"type":"string","format":"email","minLength":1},"password":{"type":"string","minLength":1}},"required":["email","password"]},"LoginResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"tokenType":{"type":"string"},"expiresIn":{"type":"integer","format":"int64"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"ForgotPasswordRequest":{"type":"object","properties":{"email":{"type":"string","format":"email","minLength":1}},"required":["email"]},"ForgotPasswordResponse":{"type":"object","properties":{"message":{"type":"string"},"success":{"type":"boolean"}}},"AreaStatDTO":{"type":"object","properties":{"areaId":{"type":"string"},"correctCount":{"type":"integer","format":"int64"},"totalCount":{"type":"integer","format":"int64"},"accuracyPct":{"type":"number","format":"double"}}},"CompetencyStatDTO":{"type":"object","properties":{"competencyId":{"type":"integer","format":"int64"},"correctCount":{"type":"integer","format":"int64"},"totalCount":{"type":"integer","format":"int64"},"accuracyPct":{"type":"number","format":"double"}}},"ProfileDTO":{"type":"object","properties":{"totalSessions":{"type":"integer","format":"int64"},"overallAccuracyPct":{"type":"number","format":"double"},"avgAnswerTimeMs":{"type":"number","format":"double"},"totalXp":{"type":"integer","format":"int64"},"currentLevel":{"type":"integer","format":"int32"},"topArea":{"$ref":"#/components/schemas/AreaStatDTO"},"topSkills":{"type":"array","items":{"$ref":"#/components/schemas/SkillStatDTO"}},"topCompetencies":{"type":"array","items":{"$ref":"#/components/schemas/CompetencyStatDTO"}},"flashcardsCount":{"type":"integer","format":"int64"}}},"ProfileResponse":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserResponse"},"metrics":{"$ref":"#/components/schemas/ProfileDTO"}}},"SkillStatDTO":{"type":"object","properties":{"skillId":{"type":"integer","format":"int64"},"correctCount":{"type":"integer","format":"int64"},"totalCount":{"type":"integer","format":"int64"},"accuracyPct":{"type":"number","format":"double"}}},"Pageable":{"type":"object","properties":{"page":{"type":"integer","format":"int32","minimum":0},"size":{"type":"integer","format":"int32","minimum":1},"sort":{"type":"array","items":{"type":"string"}}}},"PageFlashcardResponseDTO":{"type":"object","properties":{"totalElements":{"type":"integer","format":"int64"},"totalPages":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/FlashcardResponseDTO"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"paged":{"type":"boolean"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"},"unpaged":{"type":"boolean"}}},"SortObject":{"type":"object","properties":{"sorted":{"type":"boolean"},"empty":{"type":"boolean"},"unsorted":{"type":"boolean"}}},"ValidateTokenResponse":{"type":"object","properties":{"valid":{"type":"boolean"},"message":{"type":"string"},"userEmail":{"type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}